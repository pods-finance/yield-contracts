# Properties

To make the process of property creation easier, we can look at the system from different points of view. In our case, these will be our types of properties.

[Certora](https://github.com/Certora/Tutorials/blob/master/06.Lesson_ThinkingProperties/Categorizing_Properties.pdf) splits properties into 5 main types:

- Valid States
- State Transitions
- Variable Transitions
- High-Level Properties
- Unit Tests

| Property                                                                                                                                                                                        | Type              | Risk   | Tested |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------- | ------ | ------ |
| The Multisig (VaultController) only have access to 50% of the weekly yield generated on the yield source, hence the Vault can only lose 50% of the yield generated by Lido                      | Unit Tests        | High   |        |
| The Multisig (VaultController) can not withdraw on behalf of other users                                                                                                                        | Unit Tests        | High   |
| The Multisig (VaultController) can not pause the system for more than 7 days                                                                                                                    | Unit Tests        | High   |
| 50% of the weekly yield generated on the yield source represents less than 1% of the TVL                                                                                                        | High-Level        | Medium |
| We do not have directly exposure to oracle risks                                                                                                                                                | High-Level        | High   |
| The VaultController can also act as a Depositor and as a RoundProcessor                                                                                                                         | High-Level        | Low    | ✅     |
| Any address could process its own or other deposits                                                                                                                                             | High-Level        | Medium | ✅     |
| End round transfers from investor to vault if investor has balance                                                                                                                              | State Transitions | Medium |
| End round transfers 50% of the yield in the week from vault to investor                                                                                                                         | State Transitions | Medium |
| End round blocks new deposits and withdrawals                                                                                                                                                   | State Transitions | Medium | ✅     |
| End round calculates the weekly yield based on the lastRoundAssets variable and the current balance.                                                                                            | Unit Test         | Medium |
| Start round re-allows new deposits and withdrawals                                                                                                                                              | State Transitions | Medium | ✅     |
| Start round sets the lastRoundAssets variable that will be used to calculate the total yield generated during the round period.                                                                 | Unit Test         | Medium |
| The creation of the vault sets the start of the rounds system, known as moment zero or round zero.                                                                                              | Unit Test         | Low    |
| Deposits and withdrawals occur when the flag isProcessingDeposits is set to false                                                                                                               | Valid States      | Medium | ✅     |
| If an address wishes to withdraw before their shares are processed, they can use the function withdrawFromTheQueue, which removes their address from the queue and returns their funds to them. | Unit Test         | Medium |
| At the Deposits Processing Window, newly deposited funds are moved from the vault to the Yield Source                                                                                           | State Transitions | Medium |
| The Admin/Multisig cannot stop withdrawals unless the deposit cap is reduced by more than total shares                                                                                          | High-Level        | High   | ✅     |
| Users must go through one full round after the deposit has been made to be exposed to the strangle strategy                                                                                     | High-Level        | Medium |
| A user will always withdraw more or equal to what they have deposited, unless there are withdraw fees, negative rebasing events or rounding errors                                              | High-Level        | High   | ✅     |
| A user can always withdraw their principal after one week                                                                                                                                       | Unit Test         | High   |        |
| The vault's balance increases monotonically unless there are withdrawls or negative rebasing events                                                                                             | High-Level        | High   | ✅     |
| Processing deposits is order-invariant                                                                                                                                                          | Unit Test         | Medium | ✅     |
